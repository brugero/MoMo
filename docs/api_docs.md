# MoMo Transaction API Documentation

## Overview

This REST API exposes access to MoMo SMS transaction data processed via the ETL pipeline.  
It supports full CRUD operations on transaction records.  
All endpoints require Basic Authentication.

**Base URL (local development):** `http://localhost:8000`  

---

## Authentication

All requests must include HTTP Basic Authentication.

- Header: `Authorization: Basic <base64(username:password)>`  
- Example (curl):


curl -u myuser:mypass http://localhost:8000/transactions

If credentials are invalid or missing, the server responds:

401 Unauthorized
{ "detail": "Invalid credentials" }

# Endpoints

## GET /transactions
Description: Retrieve a list of all transaction records.

Method: GET

Path: /transactions

### Request Headers:
| Header        | Required | Value / Format   |
| ------------- | -------- | ---------------- |
| Authorization | ✅        | Basic auth token |
| (others)      | —        | —                |

### Response (200 OK):
[
  {
    "id": 1,
    "type": "Deposit",
    "amount": 1000,
    "sender": "Alice",
    "receiver": "MTN",
    "timestamp": "2025-10-01T09:00:00"
  },
  {
    "id": 2,
    "type": "Withdrawal",
    "amount": 500,
    "sender": "MTN",
    "receiver": "Bob",
    "timestamp": "2025-10-01T10:15:00"
  }
]
### Error responses:

401 Unauthorized — missing/invalid credentials

500 Internal Server Error — unexpected error

## GET /transactions/{id}
Description: Retrieve a single transaction record by its id.

Method: GET

Path: /transactions/{id}

### Path parameter:
| Parameter | Type    | Description           |
| --------- | ------- | --------------------- |
| `id`      | integer | Unique transaction ID |

### Response (200 OK):
{
  "id": 1,
  "type": "Deposit",
  "amount": 1000,
  "sender": "Alice",
  "receiver": "MTN",
  "timestamp": "2025-10-01T09:00:00"
}
### Error responses:

401 Unauthorized

404 Not Found — if no transaction with given id

500 Internal Server Error

## POST /transactions
Description: Create a new transaction record.

Method: POST

Path: /transactions

### Request Headers:
| Header        | Required | Value / Format     |
| ------------- | -------- | ------------------ |
| Authorization | ✅        | Basic auth token   |
| Content-Type  | ✅        | `application/json` |

### Request Body (JSON):
{
  "type": "Deposit",
  "amount": 2500,
  "sender": "Chris",
  "receiver": "MTN",
  "timestamp": "2025-10-01T11:20:00"
}
### Response (201 Created):
{
  "message": "Transaction created successfully",
  "transaction": {
    "id": 10,
    "type": "Deposit",
    "amount": 2500,
    "sender": "Chris",
    "receiver": "MTN",
    "timestamp": "2025-10-01T11:20:00"
  }
}
### Error responses:

400 Bad Request — missing or invalid fields

401 Unauthorized

500 Internal Server Error

## PUT /transactions/{id}
Description: Update an existing transaction record.

Method: PUT

Path: /transactions/{id}

### Path parameter:
| Parameter | Type    | Description                     |
| --------- | ------- | ------------------------------- |
| `id`      | integer | ID of the transaction to update |

### Request Headers:
| Header        | Required | Value / Format     |
| ------------- | -------- | ------------------ |
| Authorization | ✅        | Basic auth token   |
| Content-Type  | ✅        | `application/json` |

### Request Body (JSON):
Fields to update. Example:
{
  "amount": 3000
}

### Response (200 OK):
{
  "message": "Transaction updated successfully",
  "transaction": {
    "id": 5,
    "type": "Deposit",
    "amount": 3000,
    "sender": "Alice",
    "receiver": "MTN",
    "timestamp": "2025-10-01T09:00:00"
  }
}
### Error responses:

400 Bad Request — invalid data

401 Unauthorized

404 Not Found — if id does not exist

500 Internal Server Error

## DELETE /transactions/{id}
Description: Delete a transaction record.

Method: DELETE

Path: /transactions/{id}

### Path parameter:
| Parameter | Type    | Description                     |
| --------- | ------- | ------------------------------- |
| `id`      | integer | ID of the transaction to delete |

### Response (200 OK):
{
  "message": "Transaction deleted successfully"
}
### Error responses:

401 Unauthorized

404 Not Found — if no such record

500 Internal Server Error

## Notes & Assumptions
- All timestamps use ISO 8601 format (e.g., `YYYY-MM-DDTHH:MM:SS`).
- The `TransactionId` field is an integer and is auto-generated by the system. Clients should not provide it when creating a transaction.
- `POST /transactions` requires all fields except `TransactionId`.
- `PUT /transactions/{id}` requires **all fields** to be provided (partial updates are not supported).
- API logic and requirements may change — ensure the documentation is updated accordingly.
